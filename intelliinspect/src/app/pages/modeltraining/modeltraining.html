<div class="container-fluid">

  <!-- Header -->
  <div class="d-flex justify-content-between align-items-center p-3 bg-danger text-white">
    <h3 class="mb-0">MiniML - Predictive Quality Control</h3>
    <img src="assets/abb-logo.png" alt="ABB Logo" height="40">
  </div>
  <div class="bg-light text-danger px-3 py-1 small">Simplified Frontend</div>

  <!-- Navigation -->
  <ul class="nav nav-pills justify-content-center my-3">
    <li class="nav-item"><a class="nav-link" routerLink="/upload">1 Upload Dataset</a></li>
    <li class="nav-item"><a class="nav-link" routerLink="/daterange">2 Date Ranges</a></li>
    <li class="nav-item"><a class="nav-link active">3 Model Training</a></li>
    <li class="nav-item"><a class="nav-link disabled">4 Simulation</a></li>
  </ul>

  <!-- Training Section -->
  <div class="card shadow-sm p-4 mb-4">
    <h5>Model Training & Evaluation <span class="badge bg-primary float-end">Step 3 of 4</span></h5>

    <!-- Before Training -->
    <div *ngIf="!trained" class="text-center my-5">
      <button class="btn btn-primary" (click)="trainModel()">Train Model</button>
    </div>

    <!-- After Training -->
    <div *ngIf="trained">
      <div class="alert alert-success">✔ Model Trained</div>

      <!-- Metrics Cards -->
      <div class="row text-center g-3">
        <div class="col-md-3"><div class="card p-3"><h6>Accuracy</h6><h4>{{accuracy}}%</h4></div></div>
        <div class="col-md-3"><div class="card p-3"><h6>Precision</h6><h4>{{precision}}%</h4></div></div>
        <div class="col-md-3"><div class="card p-3"><h6>Recall</h6><h4>{{recall}}%</h4></div></div>
        <div class="col-md-3"><div class="card p-3"><h6>F1 Score</h6><h4>{{f1score}}%</h4></div></div>
      </div>

      <p class="small text-muted mt-2">Model trained on 10 months of data · Validated on 2 months · Ready for 2 month simulation</p>

      <!-- Training Metrics Chart -->
      <div class="card mt-4">
        <div class="card-body">
          <h6 class="mb-3">Training Metrics</h6>
          <canvas id="trainingChart"></canvas>
        </div>
      </div>

      <!-- Confusion Matrix Donut -->
      <div class="card mt-4">
        <div class="card-body">
          <h6 class="mb-3">Model Performance</h6>
          <canvas id="confusionChart"></canvas>
        </div>
      </div>

      <!-- Next Button -->
      <div class="text-end mt-4">
        <button class="btn btn-primary" [routerLink]="['/simulation']">Next</button>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <div class="footer bg-danger text-white text-center py-2">
    <small>Engineered to Outrun | MiniML POC</small>
  </div>
</div>
